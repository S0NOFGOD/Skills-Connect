<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SkillConnect â€” Freelancer Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
  * { margin:0; padding:0; box-sizing:border-box; font-family:'Montserrat', sans-serif; }
  body {
    background:#0D1117;
    color:#F0F6FC;
    padding:20px;
  }
  .header {
    text-align:center;
    margin-bottom:20px;
  }
  .header h2 { color:#58A6FF; }
  .profile {
    display:flex;
    flex-direction:column;
    align-items:center;
    margin-bottom:20px;
  }
  .profile img {
    width:100px; height:100px; border-radius:50%; object-fit:cover; margin-bottom:10px;
    border:2px solid #58A6FF;
  }
  .info {
    width:100%; background:#161B22; padding:15px; border-radius:12px; margin-bottom:15px;
  }
  .info p { margin:5px 0; color:#C9D1D9; font-size:14px; }
  button {
    width:100%;
    padding:12px;
    border:none;
    border-radius:12px;
    margin:6px 0;
    font-weight:600;
    cursor:pointer;
    transition:0.3s;
  }
  .btn-delete { background:#D03838; color:#fff; }
  .btn-edit { background:#238636; color:#fff; }
  .btn-about { background:#1F6FEB; color:#fff; }
  .btn-rating { background:#7950F2; color:#fff; }
  .btn-projects { background:#FF9F1C; color:#000; }

  /* Edit form popup */
  .overlay {
    position:fixed; top:0; left:0; width:100%; height:100%;
    background:rgba(0,0,0,0.7);
    display:none; justify-content:center; align-items:center;
  }
  .edit-form {
    background:#161B22; padding:20px; border-radius:16px; width:90%;
  }
  .edit-form input, .edit-form select { width:100%; padding:12px; margin:8px 0; border-radius:10px; border:1px solid #30363D; background:#0D1117; color:#C9D1D9; }
  .edit-form button { margin-top:10px; }

  @media(max-width:400px){
    .edit-form { width:95%; }
  }
</style>
</head>
<body>

<div class="header">
  <h2 id="welcomeText">Welcome, Freelancer</h2>
</div>

<div class="profile">
  <img id="profileImage" src="" alt="Profile Image">
  <div class="info">
    <p><strong>Name:</strong> <span id="fullName"></span></p>
    <p><strong>Email:</strong> <span id="email"></span></p>
    <p><strong>Phone:</strong> <span id="phone"></span></p>
    <p><strong>Skill:</strong> <span id="skill"></span></p>
    <p><strong>Location:</strong> <span id="location"></span></p>
  </div>
</div>

<button class="btn-delete" onclick="deleteAccount()">Delete Account</button>
<button class="btn-edit" onclick="showEditForm()">Edit Account</button>
<button class="btn-about" onclick="window.location.href='aboutme.html'">About Me</button>
<button class="btn-rating">Rating</button>
<button class="btn-projects">Projects</button>

<!-- Edit Form Overlay -->
<div class="overlay" id="overlay">
  <div class="edit-form">
    <h3>Edit Account</h3>
    <label>Name</label>
    <input type="text" id="editName">
    <label>Local Skill</label>
    <select id="editSkill">
      <option value="">Select Skill</option>
      <option value="Plumbing">Plumbing</option>
      <option value="Carpentry">Carpentry</option>
      <option value="Electrician">Electrician</option>
      <option value="Haircutting">Haircutting</option>
      <option value="Cooking">Cooking</option>
      <option value="Gardening">Gardening</option>
      <option value="Cleaning">Cleaning</option>
    </select>
    <label>Location (readonly)</label>
    <input type="text" id="editLocation" readonly>
    <button class="btn-edit" onclick="updateAccount()">Update</button>
    <button style="margin-top:6px;background:#D03838;color:#fff;" onclick="closeEditForm()">Cancel</button>
  </div>
</div>

<script>
let currentUser = JSON.parse(localStorage.getItem('currentFreelancer'));
if(!currentUser){ alert('No user logged in'); window.location.href='freelancer.html'; }

// Populate profile
document.getElementById('welcomeText').innerText = `Welcome, ${currentUser.name.split(' ')[0]}`;
document.getElementById('profileImage').src = currentUser.image || 'https://via.placeholder.com/100';
document.getElementById('fullName').innerText = currentUser.name;
document.getElementById('email').innerText = currentUser.email;
document.getElementById('phone').innerText = currentUser.phone;
document.getElementById('skill').innerText = currentUser.skill;
document.getElementById('location').innerText = currentUser.location;

// Delete account
function deleteAccount(){
  if(confirm('Are you sure you want to delete your account?')){
    let users = JSON.parse(localStorage.getItem('freelancers') || '[]');
    users = users.filter(u => u.email !== currentUser.email);
    localStorage.setItem('freelancers', JSON.stringify(users));
    localStorage.removeItem('currentFreelancer');
    alert('Account deleted!');
    window.location.href='freelancer.html';
  }
}

// Edit account
function showEditForm(){
  document.getElementById('overlay').style.display='flex';
  document.getElementById('editName').value = currentUser.name;
  document.getElementById('editSkill').value = currentUser.skill;
  document.getElementById('editLocation').value = currentUser.location;
}

function closeEditForm(){ document.getElementById('overlay').style.display='none'; }

function updateAccount(){
  const newName = document.getElementById('editName').value.trim();
  const newSkill = document.getElementById('editSkill').value;
  if(!newName || !newSkill){ alert('Fill all fields'); return; }

  currentUser.name = newName;
  currentUser.skill = newSkill;

  let users = JSON.parse(localStorage.getItem('freelancers') || '[]');
  const index = users.findIndex(u => u.email === currentUser.email);
  if(index>=0){ users[index] = currentUser; localStorage.setItem('freelancers', JSON.stringify(users)); }
  localStorage.setItem('currentFreelancer', JSON.stringify(currentUser));
  alert('Account updated!');
  closeEditForm();
  location.reload();
}
</script>
</body>
</html>
