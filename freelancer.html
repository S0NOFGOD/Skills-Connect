<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SkillConnect</title>

<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">

<style>

*{
margin:0;
padding:0;
box-sizing:border-box;
font-family:'Montserrat',sans-serif;
}

body{
min-height:100vh;
background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
display:flex;
align-items:center;
justify-content:center;
color:white;
}

.container{
width:95%;
max-width:500px;
background:rgba(255,255,255,0.08);
backdrop-filter:blur(20px);
border-radius:20px;
padding:30px;
}

.tabs{
display:flex;
justify-content:space-around;
margin-bottom:20px;
}

.tab{
padding:10px 20px;
cursor:pointer;
border-radius:12px;
}

.tab.active{
background:#0072ff;
}

.form-section{
display:none;
flex-direction:column;
}

.form-section.active{
display:flex;
}

input,button{
padding:14px;
margin-bottom:12px;
border-radius:12px;
border:none;
}

button{
cursor:pointer;
background:#0072ff;
color:white;
font-weight:600;
}

button:disabled{
opacity:0.6;
cursor:not-allowed;
}

.error{
color:#ff4b5c;
}

.success{
color:#00ffaa;
}

</style>
</head>

<body>

<div class="container">

<div class="tabs">
<div class="tab active" id="login-tab">Login</div>
<div class="tab" id="signup-tab">Signup</div>
</div>


<!-- LOGIN -->
<div id="login" class="form-section active">

<div id="login-error" class="error"></div>
<div id="login-success" class="success"></div>

<input id="login-email" type="email" placeholder="Email">
<input id="login-password" type="password" placeholder="Password">

<button id="login-btn">Login</button>
<button id="forgot-btn">Forgot Password</button>


<div id="forgot-email-container" style="display:none">

<div id="forgot-error" class="error"></div>
<div id="forgot-success" class="success"></div>

<input id="forgot-email" type="email" placeholder="Enter your email">

<button id="send-reset-btn">Send Reset Code</button>
<button id="back-login-btn">Back</button>

</div>


<div id="reset-password-container" style="display:none">

<div id="reset-error" class="error"></div>
<div id="reset-success" class="success"></div>

<input id="reset-code" placeholder="Enter reset code">

<input id="new-password" type="password" placeholder="New password">

<input id="confirm-new-password" type="password" placeholder="Confirm password">

<button id="reset-password-btn">Reset Password</button>
<button id="back-reset-btn">Back</button>

</div>

</div>


<!-- SIGNUP -->
<div id="signup" class="form-section">

<div id="signup-error" class="error"></div>
<div id="signup-success" class="success"></div>

<input id="signup-name" placeholder="Name">
<input id="signup-email" type="email" placeholder="Email">
<input id="signup-phone" placeholder="Phone">
<input id="signup-location" placeholder="Location">

<input id="signup-password" type="password" placeholder="Password">
<input id="signup-confirm-password" type="password" placeholder="Confirm Password">

<button id="signup-btn">Create Account</button>

</div>

</div>


<script>

const BACKEND_URL="https://skillconnect-backend-uv3z.onrender.com";

let resetEmail="";


function safeJSON(res){
return res.text().then(text=>{
try{
return JSON.parse(text);
}catch{
return {message:text};
}
});
}


function switchTab(tab){

document.getElementById("login").classList.remove("active");
document.getElementById("signup").classList.remove("active");

document.getElementById("login-tab").classList.remove("active");
document.getElementById("signup-tab").classList.remove("active");

document.getElementById(tab).classList.add("active");
document.getElementById(tab+"-tab").classList.add("active");

clearMessages();

}


function clearMessages(){

[
"login-error","login-success",
"signup-error","signup-success",
"forgot-error","forgot-success",
"reset-error","reset-success"

].forEach(id=>{

document.getElementById(id).innerText="";

});

}


document.getElementById("login-tab").onclick=()=>switchTab("login");
document.getElementById("signup-tab").onclick=()=>switchTab("signup");



/* LOGIN */

document.getElementById("login-btn").onclick=async()=>{

const btn=document.getElementById("login-btn");

const email=document.getElementById("login-email").value.trim();
const password=document.getElementById("login-password").value.trim();

const error=document.getElementById("login-error");
const success=document.getElementById("login-success");

clearMessages();

if(!email || !password){

error.innerText="Email and password required";
return;

}

btn.disabled=true;
btn.innerText="Logging in...";

try{

const res=await fetch(`${BACKEND_URL}/login`,{

method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({email,password})

});

const data=await safeJSON(res);

if(!res.ok){

error.innerText=data.message || "Login failed";

}else{

success.innerText="Login successful";

}

}catch{

error.innerText="Server error";

}

btn.disabled=false;
btn.innerText="Login";

};



/* FORGOT */

document.getElementById("forgot-btn").onclick=()=>{

clearMessages();

document.getElementById("forgot-email-container").style.display="block";

};



document.getElementById("back-login-btn").onclick=()=>{

document.getElementById("forgot-email-container").style.display="none";
document.getElementById("reset-password-container").style.display="none";

clearMessages();

};



document.getElementById("back-reset-btn").onclick=()=>{

document.getElementById("reset-password-container").style.display="none";

clearMessages();

};



/* SEND RESET */

document.getElementById("send-reset-btn").onclick=async()=>{

const btn=document.getElementById("send-reset-btn");

const email=document.getElementById("forgot-email").value.trim();

const error=document.getElementById("forgot-error");
const success=document.getElementById("forgot-success");

clearMessages();

if(!email){

error.innerText="Email required";
return;

}

resetEmail=email;

btn.disabled=true;
btn.innerText="Sending...";

try{

const res=await fetch(`${BACKEND_URL}/forgot-password`,{

method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({email})

});

const data=await safeJSON(res);

if(!res.ok){

error.innerText=data.message;

}else{

success.innerText="Reset code sent";

document.getElementById("forgot-email-container").style.display="none";
document.getElementById("reset-password-container").style.display="block";

}

}catch{

error.innerText="Server error";

}

btn.disabled=false;
btn.innerText="Send Reset Code";

};



/* RESET PASSWORD */

document.getElementById("reset-password-btn").onclick=async()=>{

const btn=document.getElementById("reset-password-btn");

const code=document.getElementById("reset-code").value.trim();
const newPassword=document.getElementById("new-password").value.trim();
const confirmPassword=document.getElementById("confirm-new-password").value.trim();

const error=document.getElementById("reset-error");
const success=document.getElementById("reset-success");

clearMessages();

if(!code || !newPassword || !confirmPassword){

error.innerText="All fields required";
return;

}

if(newPassword!==confirmPassword){

error.innerText="Passwords do not match";
return;

}

btn.disabled=true;
btn.innerText="Resetting...";

try{

const res=await fetch(`${BACKEND_URL}/reset-password`,{

method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({

email:resetEmail,
code,
newPassword

})

});

const data=await safeJSON(res);

if(!res.ok){

error.innerText=data.message;

}else{

success.innerText="Password reset successful";

}

}catch{

error.innerText="Server error";

}

btn.disabled=false;
btn.innerText="Reset Password";

};



/* SIGNUP */

document.getElementById("signup-btn").onclick=async()=>{

const btn=document.getElementById("signup-btn");

const error=document.getElementById("signup-error");
const success=document.getElementById("signup-success");

clearMessages();

const formData=new FormData();

formData.append("name",document.getElementById("signup-name").value);
formData.append("email",document.getElementById("signup-email").value);
formData.append("phone",document.getElementById("signup-phone").value);
formData.append("location",document.getElementById("signup-location").value);
formData.append("password",document.getElementById("signup-password").value);

btn.disabled=true;
btn.innerText="Creating account...";

try{

const res=await fetch(`${BACKEND_URL}/signup`,{

method:"POST",
body:formData

});

const data=await safeJSON(res);

if(!res.ok){

error.innerText=data.message;

}else{

success.innerText="Account created successfully";

}

}catch{

error.innerText="Server error";

}

btn.disabled=false;
btn.innerText="Create Account";

};

</script>

</body>
  </html>
